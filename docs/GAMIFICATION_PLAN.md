# 遊戲化激勵機制實作計畫

## 目標

讓小孩子更有興趣主動複習英文單字，每天主動查看並學習。

---

## 系統架構

```
┌─────────────────────────────────────────────────────────────┐
│                    遊戲化激勵系統架構                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────┐    ┌─────────┐    ┌─────────┐               │
│   │ 每日任務 │    │ 成就徽章 │    │ 積分商店 │               │
│   │ Daily   │    │ Badges  │    │ Shop    │               │
│   └────┬────┘    └────┬────┘    └────┬────┘               │
│        │              │              │                     │
│        └──────────────┴──────────────┘                     │
│                       │                                     │
│                 ┌─────▼─────┐                               │
│                 │   星星幣   │  ← 核心貨幣                  │
│                 │   Stars   │                               │
│                 └─────┬─────┘                               │
│                       │                                     │
│   ┌───────────────────┼───────────────────┐                │
│   │                   │                   │                │
│   ▼                   ▼                   ▼                │
│ ┌─────────┐    ┌─────────┐    ┌─────────┐                 │
│ │連續登入 │    │寵物養成 │    │排行榜  │                  │
│ │ Streak  │    │ Pet     │    │Leaderboard│               │
│ └─────────┘    └─────────┘    └─────────┘                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## Phase 1：核心激勵系統（優先實作）

### 1.1 星星幣積分系統

**獲取規則**：
- 答對 1 題：+1 星星
- 測驗 100% 正確：+5 額外星星
- 測驗 >80% 正確：+2 額外星星
- 完成每日任務：依任務獎勵

**Profile 欄位新增**：
```prisma
stars         Int      @default(0)        // 目前星星幣
totalStars    Int      @default(0)        // 歷史總獲得
lastLoginAt   DateTime?                   // 最後登入時間
loginStreak   Int      @default(0)        // 連續登入天數
```

### 1.2 每日任務系統

**任務類型**：
- `quiz_count`：完成 N 題測驗
- `review_count`：複習 N 個待複習單字
- `correct_streak`：連續答對 N 題
- `accuracy_rate`：正確率達 N%

**每日任務範例**：
- 完成 10 題測驗 (+5 星星)
- 複習 5 個待複習單字 (+3 星星)
- 連續答對 5 題 (+10 星星)
- 今日測驗正確率達 80% (+8 星星)

**資料表**：
```prisma
model DailyQuest {
  id             String   @id @default(cuid())
  profileId      String
  date           DateTime @db.Date
  quest1Type     String
  quest1Target   Int
  quest1Progress Int      @default(0)
  quest1Reward   Int      @default(5)
  quest2Type     String
  quest2Target   Int
  quest2Progress Int      @default(0)
  quest2Reward   Int      @default(5)
  quest3Type     String
  quest3Target   Int
  quest3Progress Int      @default(0)
  quest3Reward   Int      @default(5)
  completed      Boolean  @default(false)

  profile        Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)

  @@unique([profileId, date])
}
```

### 1.3 連續登入獎勵

**獎勵設計**：
| 天數 | 獎勵 |
|------|------|
| 第 1 天 | 5 星星 |
| 第 2 天 | 5 星星 |
| 第 3 天 | 10 星星 + 成就 |
| 第 4-6 天 | 5 星星/天 |
| 第 7 天 | 20 星星 + 成就 |
| 第 14 天 | 50 星星 + 成就 |
| 第 30 天 | 100 星星 + 成就 |

---

## Phase 2：成就與商店

### 2.1 成就徽章系統

**徽章設計**：

| 類別 | 名稱 | 條件 | 稀有度 |
|------|------|------|--------|
| 學習 | 初心者 | 完成第一次測驗 | 普通 |
| 學習 | 百詞達人 | 精熟 100 個單字 | 稀有 |
| 學習 | 千詞大師 | 精熟 1000 個單字 | 史詩 |
| 準確 | 神射手 | 單次測驗 100% 正確 | 普通 |
| 準確 | 穩定輸出 | 連續 5 次測驗 >80% | 稀有 |
| 速度 | 閃電俠 | 平均答題時間 < 3 秒 | 稀有 |
| 堅持 | 不屈不撓 | 連續登入 7 天 | 普通 |
| 堅持 | 鐵人意志 | 連續登入 30 天 | 史詩 |
| 複習 | 記憶大師 | 完成 100 次 SRS 複習 | 稀有 |

### 2.2 積分商店

**可購買物品**：

| 類別 | 物品 | 價格 |
|------|------|------|
| 頭像框 | 火焰框 | 50 星星 |
| 頭像框 | 彩虹框 | 100 星星 |
| 主題 | 太空主題 | 200 星星 |
| 主題 | 森林主題 | 200 星星 |

---

## Phase 3：進階功能

### 3.1 虛擬寵物養成

- 每天登入：餵食寵物 (+10 飽足度)
- 每答對 1 題：+5 經驗值、+2 快樂度
- 達到特定等級：寵物進化

**進化階段**（以小龍為例）：
```
蛋 (Lv.1) → 小龍寶寶 (Lv.10) → 幼龍 (Lv.30) → 成年龍 (Lv.60) → 傳說神龍 (Lv.100)
```

### 3.2 排行榜

- **週榜**：本週獲得星星最多
- **月榜**：本月精熟單字最多
- **總榜**：累積總星星數

---

## 預估時間

| 階段 | 功能 | 預估時間 |
|------|------|---------|
| Phase 1 | 星星幣 + 每日任務 + 連續登入 | 1-2 週 |
| Phase 2 | 成就徽章 + 積分商店 | 2-3 週 |
| Phase 3 | 虛擬寵物 + 排行榜 | 3-4 週 |

---

## UI 設計參考

### 每日任務面板

```
┌─────────────────────────────────┐
│  📋 今日任務                    │
├─────────────────────────────────┤
│  ☑ 完成 10 題測驗      +5 ⭐    │
│  ☐ 複習 5 個待複習單字  +3 ⭐    │
│  ☐ 連續答對 5 題       +10 ⭐   │
├─────────────────────────────────┤
│  🔥 連續登入：第 3 天           │
│  明天額外獎勵：+10 ⭐            │
└─────────────────────────────────┘
```

### 連續登入日曆

```
┌────────────────────────────────────────┐
│        連續登入獎勵                      │
│  ┌───┬───┬───┬───┬───┬───┬───┐        │
│  │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │        │
│  │ ✓ │ ✓ │ ★ │   │   │   │ ★ │        │
│  │5星│5星│10│5星│5星│5星│20│        │
│  └───┴───┴───┴───┴───┴───┴───┘        │
│  目前連續：3 天    明天獎勵：5 星星      │
└────────────────────────────────────────┘
```

---

*建立日期：2026-02-04*
